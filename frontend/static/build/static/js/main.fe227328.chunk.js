(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{31:function(e,t,n){},34:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(24),s=n.n(r),i=(n(31),n(6)),o=n.n(i),l=n(13),j=n(3),u=n(9),b=n(2),d=n(0);var m=function(e){var t,n,c=Object(a.useState)(""),r=Object(j.a)(c,2),s=r[0],i=r[1];if(!e.isAuth)return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"Profile"}),Object(d.jsxs)("form",{action:"",onSubmit:e.handleSubmit,children:[Object(d.jsx)("input",{type:"text",name:"alias",value:null===(t=e.profile)||void 0===t?void 0:t.alias,onChange:function(t){var n=t.target,a=n.name,c=n.value;e.setProfile(Object(b.a)(Object(b.a)({},e.profile),{},Object(u.a)({},a,c)))}}),Object(d.jsx)("input",{type:"file",name:"avatar",onChange:function(t){var n=t.target.files[0];e.setProfile(Object(b.a)(Object(b.a)({},e.profile),{},{image:n}));var a=new FileReader;a.onloadend=function(){i(a.result)},a.readAsDataURL(n),console.log(a)}}),(null===(n=e.profile)||void 0===n?void 0:n.image)&&Object(d.jsx)("img",{src:s,alt:""}),Object(d.jsx)("button",{type:"submit",children:"Save Profile"})]})]})},h=(n(34),n(4)),p=n(8),f=n.n(p);var x=Object(h.h)((function(e){var t=Object(a.useState)({username:"",email:"",password1:"",password2:""}),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(null),i=Object(j.a)(s,2),m=(i[0],i[1]),p=function(e){var t=e.target,n=t.name,a=t.value;r((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(u.a)({},n,a))}))};function x(e){console.warn(e)}function O(){return(O=Object(l.a)(o.a.mark((function t(n){var a,r,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),c.password1===c.password2){t.next=5;break}m("Passwords do not match"),t.next=18;break;case 5:return a={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(c)},t.next=8,fetch("/rest-auth/registration/",a).catch(x);case 8:if(r=t.sent){t.next=13;break}console.log(r),t.next=18;break;case 13:return t.next=15,r.json();case 15:s=t.sent,f.a.set("Authorization","Token ".concat(s.key)),e.setIsAuth(!0);case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.isAuth?Object(d.jsx)(h.a,{to:"/"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{className:"Registration-title mt-3 d-flex justify-content-center mt-3",children:"Register"}),Object(d.jsx)("form",{className:"form registrationForm d-flex justify-content-center mt-3",onSubmit:function(e){return O.apply(this,arguments)},children:Object(d.jsxs)("div",{className:"form-group form-control col-lg-1",children:[Object(d.jsx)("input",{type:"text",className:"form-user form-control  mt-3",id:"username",placeholder:"enter username",required:!0,name:"username",onChange:p,value:c.username}),Object(d.jsx)("input",{type:"text",className:"form-control col-xs-4 mt-3",id:"email",placeholder:"enter email",required:!0,name:"email",onChange:p,value:c.email}),Object(d.jsx)("input",{type:"password",className:"form-control col-xs-4 mt-3",id:"password1",placeholder:"enter password",required:!0,name:"password1",onChange:p,value:c.password1}),Object(d.jsx)("input",{type:"password",className:"form-control col-xs-4 mt-3",id:"password2",placeholder:"confirm password",required:!0,name:"password2",onChange:p,value:c.password2}),Object(d.jsx)("button",{type:"submit",className:"registration-btn btn btn-info d-flex justify-content-center mt-3",children:"Register"})]})})]})}));var O=Object(h.h)((function(e){function t(t){var n=t.target,a=n.name,c=n.value;e.setUsers((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(u.a)({},a,c))}))}function n(e){console.warn(e)}function a(){return(a=Object(l.a)(o.a.mark((function t(a){var c,r,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),c={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(e.users)},t.next=4,fetch("/rest-auth/login/",c).catch(n);case 4:if(r=t.sent){t.next=9;break}console.log(r),t.next=15;break;case 9:return console.log(r),t.next=12,r.json();case 12:s=t.sent,f.a.set("Authorization","Token ".concat(s.key)),e.setIsAuth(!0);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.isAuth?Object(d.jsx)(h.a,{to:"/"}):Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"container container-md mt-4",children:[Object(d.jsx)("h2",{className:"Login-title  d-flex justify-content-center mt-3",children:"Login"}),Object(d.jsxs)("form",{className:"form-signin form  d-flex justify-content-center mt-3",onSubmit:function(e){return a.apply(this,arguments)},children:[Object(d.jsx)("input",{type:"text",className:"form-user mx-3",id:"username",placeholder:"Enter Username",required:!0,name:"username",onChange:t,value:e.users.username}),Object(d.jsx)("input",{type:"password",id:"password",placeholder:"Enter Password",required:!0,name:"password",onChange:t,value:e.users.password}),Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col text-center",children:Object(d.jsx)("button",{type:"submit",className:"Login-btn btn btn-info mt-3",children:"Login"})})})]}),Object(d.jsx)("h2",{className:" d-flex justify-content-center mt-4",children:"Need to Register?"}),Object(d.jsx)("div",{class:"container",children:Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col text-center",children:Object(d.jsx)("button",{type:"button",className:"btn btn-info",onClick:function(){return e.setState({isAuth:!1,selection:"registration"})},children:"Register"})})})})]})})}));var g=function(e){var t,n=Object(a.useState)({title:"",body:"",image:null}),c=Object(j.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(""),m=Object(j.a)(i,2),h=m[0],p=m[1],x=null===(t=e.articles)||void 0===t?void 0:t.map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:e.title}),Object(d.jsx)("p",{children:e.body}),Object(d.jsx)("span",{children:e.created_at}),Object(d.jsx)("img",{className:"article-image",src:e.image})]})}));function O(e){var t=e.target,n=t.name,a=t.value;s(Object(b.a)(Object(b.a)({},r),{},Object(u.a)({},n,a)))}function g(){return(g=Object(l.a)(o.a.mark((function e(t){var n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(r)},e.next=4,fetch("/api_v1/articles/",n);case 4:if(a=e.sent){e.next=9;break}console.log(a),e.next=13;break;case 9:return e.next=11,a.json();case 11:c=e.sent,f.a.set("Authorization","Token ".concat(c.key));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(e),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{children:"Articles"}),x,Object(d.jsxs)("form",{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(d.jsx)("input",{type:"text",className:"form-user",id:"articleTitle",placeholder:"Title",required:!0,name:"title",onChange:O,value:r.title}),Object(d.jsx)("input",{type:"text",className:"form-user",id:"articleBody",placeholder:"Text",required:!0,name:"body",onChange:O,value:r.body}),Object(d.jsx)("input",{type:"file",className:"form-user",id:"articleFile",placeholder:"select file",required:!0,name:"image",onChange:function(e){var t=e.target.files[0];s(Object(b.a)(Object(b.a)({},r),{},{image:t}));var n=new FileReader;n.onloadend=function(){p(n.result)},n.readAsDataURL(t),console.log(n)}}),r.image&&Object(d.jsx)("img",{src:h,alt:""}),Object(d.jsx)("button",{type:"submit",children:"Submit"})]})]})},v=(n(40),n(5));var y=function(e){return Object(d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark nav",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("a",{className:"navbar-brand",href:"/",children:"Articles App"}),Object(d.jsx)("button",{className:"Nabar-toggler",type:"button","data-toggle":"collapse","data-target":"navbarResponsive","aria-controls":"navbarResponsive","aria-label":"Toggle navigation",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsx)("div",{className:"collapse navbar-collapse nav justify-content-end text-light",id:"navbarResponsive",children:Object(d.jsxs)("ul",{className:"navbar-nav ml-auto text-light",children:[Object(d.jsx)("li",{className:"nav-item text-light",children:Object(d.jsx)(v.b,{to:"/",children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(v.b,{to:"/register",children:"Register"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(v.b,{to:"/login",children:"Login"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(v.b,{to:"/myarticles",children:"My Articles"})}),Object(d.jsx)("li",{className:"btn-link",children:Object(d.jsx)("button",{className:"btn btn-link logout text-light",type:"button",onClick:function(){return e.handleLogoutSubmit()},children:"Logout"})})]})})]})})},N=n(19),k=n(18),S=n.n(k);var w=function(e){var t,n,c,r=Object(a.useState)({title:"",body:"",image:null}),s=Object(j.a)(r,2),i=(s[0],s[1],Object(a.useState)()),o=Object(j.a)(i,2),l=o[0],u=o[1],b=Object(a.useState)(""),m=Object(j.a)(b,2),h=(m[0],m[1],Object(d.jsx)("div",{className:"readMore",children:"Read More"}));null===(t=e.articles)||void 0===t||t.map((function(e){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h3",{children:e.title}),Object(d.jsx)("p",{children:e.body}),Object(d.jsx)("span",{children:e.categories}),Object(d.jsx)("img",{className:"article-image",src:e.image})]})})),console.log(e);var p=Object(N.a)(new Set(null===(n=e.articles)||void 0===n?void 0:n.map((function(e){return e.categories})))),f=p.map((function(e){return Object(d.jsx)("button",{className:"nav-btn btn btn-dark mx-2 justify-content-center",onClick:function(){return u(e)},children:e},e)})),x=null===(c=e.articles)||void 0===c?void 0:c.filter((function(e){return l?e.categories===l:e})),O=null===x||void 0===x?void 0:x.map((function(e){return Object(d.jsxs)("div",{className:"mt-3",children:[Object(d.jsx)("img",{className:"article-image rounded mx-auto d-block",src:e.image}),Object(d.jsx)("h3",{className:"articleTitle",children:e.title}),Object(d.jsx)(S.a,{text:e.body,min:80,ideal:100,max:1e3,readMoreText:h})]})}));return console.log({categories:p}),console.log({filteredArticles:x}),console.log({filteredArticlesHTML:O}),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"container-md",children:[Object(d.jsx)("h2",{className:"headers shadow p-3 mb-5 bg-body rounded mt-2",children:l?l.toUpperCase():"All"}),Object(d.jsx)("div",{className:"navButtons",children:Object(d.jsx)("div",{class:"container",children:Object(d.jsx)("div",{class:"row",children:Object(d.jsxs)("div",{class:"col text-center",children:[Object(d.jsx)("button",{className:"nav-btn btn btn-dark mx-2 justify-content-center",onClick:function(){return u(null)},children:"All"}),f]})})})}),O]})})};var T=function(e){console.log({draftArticle:e});var t=Object(a.useState)({title:e.article.title,body:e.article.body,options:e.article.options,image:null,categories:e.article.categories}),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(j.a)(s,2),o=(i[0],i[1]),l=function(e){var t=e.target,n=t.name,a=t.value;r(Object(b.a)(Object(b.a)({},c),{},Object(u.a)({},n,a)))};return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{className:"mt-5 col-8 draftFormn ds-flex justify-content-center",children:[Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"title",children:"Title"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"articleTitle",placeholder:"Article Title",onChange:l,required:!0,name:"title",value:c.title})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"body",children:"Article Body"}),Object(d.jsx)("textarea",{type:"text",className:"form-control",id:"articleText",placeholder:"Article body",onChange:l,required:!0,name:"body",value:c.body})]}),Object(d.jsx)("label",{htmlFor:"body",children:"Category"}),Object(d.jsx)("input",{className:"form-control",onChange:l,name:"categories",value:c.categories,placeholder:"Category"}),Object(d.jsx)("div",{className:"form-group text-left mb-3",children:Object(d.jsx)("input",{type:"file",name:"image",onChange:function(e){var t=e.target.files[0];r(Object(b.a)(Object(b.a)({},c),{},{image:t}));var n=new FileReader;n.onloadend=function(){o(n.result)},n.readAsDataURL(t)}})}),Object(d.jsx)("img",{src:c.image,alt:""}),Object(d.jsx)("div",{className:"form-group text-left mb-3",children:Object(d.jsx)("button",{type:"button",className:"form-control  btn btn-dark",id:"articleOptions",onClick:function(e){e.preventDefault();var t=new FormData;t.append("title",c.title),t.append("body",c.body),t.append("options",e.target.value),t.append("image",c.image),t.append("categories",c.categories);var n={method:"POST",headers:{"X-CSRFToken":f.a.get("csrftoken")},body:t};fetch("/api_v1/articles/",n)},required:!0,name:"DFT",value:"SUBMITTED",children:"Submit"})})]})})};var C=function(e){var t=Object(a.useState)({title:"",body:"",options:"",image:null,categories:""}),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),m=i[0],p=i[1],x=Object(a.useState)(),O=Object(j.a)(x,2),g=O[0],v=O[1],y=function(e){var t=e.target,n=t.name,a=t.value;r(Object(b.a)(Object(b.a)({},c),{},Object(u.a)({},n,a)))};Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api_v1/articles/?options=ALL");case 2:if((n=e.sent).ok){e.next=7;break}console.log(n),e.next=13;break;case 7:return e.next=9,n.json();case 9:a=e.sent,p(a),console.log({data:a}),console.log({myArticles:m});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}()}),[e.isAuth]);var k=function(e){e.preventDefault();var t=new FormData;t.append("title",c.title),t.append("body",c.body),t.append("options",e.target.value),t.append("image",c.image),t.append("categories",c.categories);var n={method:"POST",headers:{"X-CSRFToken":f.a.get("csrftoken")},body:t};fetch("/api_v1/articles/",n),r({title:"",body:"",options:"",image:null,categories:""})},w=Object(d.jsx)("div",{className:"readMore",children:"Read More"}),C=Object(N.a)(new Set(null===m||void 0===m?void 0:m.map((function(e){return e.options}))));console.log(C);var A=C.map((function(e){return Object(d.jsx)("button",{className:"nav-btn btn btn-dark mx-2 ds-flex justify-content-center",onClick:function(){return v(e)},children:e},e)})),F=null===m||void 0===m?void 0:m.filter((function(e){return g?e.options===g:e})),R=null===m||void 0===m?void 0:m.filter((function(e){return"DRAFT"===g?"DRAFT"===e.options:e})),D=null===R||void 0===R?void 0:R.map((function(e){return Object(d.jsx)(T,{article:e})}));console.log({myFilteredDrafts:R});var q=null===F||void 0===F?void 0:F.map((function(e){return Object(d.jsxs)("div",{className:"mt-3",children:[Object(d.jsx)("img",{className:"article-image rounded mx-auto d-block",src:e.image}),Object(d.jsx)("h3",{className:"articleTitle",children:e.title}),Object(d.jsx)(S.a,{text:e.body,min:100,ideal:200,max:1e6,readMoreText:w})]})}));return console.log(q),e.isAuth?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:" container ds-flex justify-content-center",children:[Object(d.jsx)("h2",{className:"d-flex justify-content-center mt-2 headers shadow p-3 mb-5 bg-body rounded",children:"My Articles"}),A,"DRAFT"===g?D:q,Object(d.jsx)("div",{className:"border"}),Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"ds-flex justify-content-center mt-3",children:[Object(d.jsx)("h2",{className:"newArticleForm text-center mt-3",children:"Submit new article"}),Object(d.jsxs)("form",{className:"mt-3 ds-flex justify-content-center mt-3",children:[Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"title",children:"Title"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"articleTitle",placeholder:"Article Title",onChange:y,required:!0,name:"title",value:c.title})]}),Object(d.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(d.jsx)("label",{htmlFor:"body",children:"Article Body"}),Object(d.jsx)("textarea",{type:"text",className:"form-control",id:"articleText",placeholder:"Article body",onChange:y,required:!0,name:"body",value:c.body})]}),Object(d.jsx)("label",{htmlFor:"body",children:"Category"}),Object(d.jsx)("input",{className:"form-control",onChange:y,name:"categories",value:c.categories,placeholder:"Category"}),Object(d.jsx)("div",{className:"form-group text-left mb-3",children:Object(d.jsx)("input",{type:"file",name:"image",onChange:function(e){var t=e.target.files[0];r(Object(b.a)(Object(b.a)({},c),{},{image:t}))}})}),Object(d.jsx)("div",{className:"form-group text-left mb-3 ",children:Object(d.jsx)("button",{type:"button",className:"form-control btn btn-dark",id:"articleOptions",onClick:k,required:!0,name:"DFT",value:"DRAFT",we:!0,children:"Save as  Draft"})}),Object(d.jsx)("div",{className:"form-group text-left mb-3",children:Object(d.jsx)("button",{type:"button",className:"form-control  btn btn-dark",id:"articleOptions",onClick:k,required:!0,name:"DFT",value:"SUBMIT",children:"Submit"})})]})]})})]})}):Object(d.jsx)(h.a,{to:"/"})};var A=Object(h.h)((function(){var e=Object(a.useState)({alias:"",image:null}),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({username:"",password:""}),s=Object(j.a)(r,2),i=s[0],u=s[1],b=Object(a.useState)([]),p=Object(j.a)(b,2),v=p[0],N=p[1],k=Object(a.useState)(),S=Object(j.a)(k,2),T=(S[0],S[1],Object(a.useState)(null)),A=Object(j.a)(T,2),F=A[0],R=A[1],D=Object(h.g)();function q(){return(q=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":f.a.get("csrftoken")},body:JSON.stringify(i)},e.next=3,fetch("/rest-auth/logout/",n);case 3:if(a=e.sent){e.next=8;break}console.log(a),e.next=15;break;case 8:return console.log(a),e.next=11,a.json();case 11:e.sent,f.a.remove("Authorization"),R(!1),D.push("/login");case 15:h.a;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=new AbortController,t=e.signal,n=function(){var n=Object(l.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/rest-auth/user/",{signal:t});case 2:return(a=n.sent).ok?(console.log({response:a}),R(!0)):(alert("not ok"),R(!1)),n.abrupt("return",(function(){e.abort()}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[D]),Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api_v1/articles/");case 2:if((n=e.sent).ok){e.next=7;break}console.log(n),e.next=12;break;case 7:return e.next=9,n.json();case 9:a=e.sent,N(a),console.log({data:a});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}()}),[F]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(y,{handleLogoutSubmit:function(e){return q.apply(this,arguments)}}),Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{path:"/login",children:Object(d.jsx)(O,{isAuth:F,setIsAuth:R,users:i,setUsers:u})}),Object(d.jsx)(h.b,{path:"/register",children:Object(d.jsx)(x,{isAuth:F,setIsAuth:R})}),Object(d.jsx)(h.b,{path:"/profile",isAuth:F,children:Object(d.jsx)(m,{profile:n,setProfile:c,handleSubmit:function(e){e.preventDefault();var t=new FormData;t.append("alias",n.alias),t.append("avatar",n.image);var a={method:"POST",headers:{"X-CSRFToken":f.a.get("csrftoken")},body:t};fetch("api_v1/accounts/",a)}})}),Object(d.jsx)(h.b,{path:"/main",children:Object(d.jsx)(g,{articles:v})}),Object(d.jsx)(h.b,{path:"/myarticles",children:Object(d.jsx)(C,{articles:v,isAuth:F})}),Object(d.jsx)(h.b,{path:"/",children:Object(d.jsx)(w,{articles:v})})]})]})})),F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(v.a,{children:Object(d.jsx)(A,{})})}),document.getElementById("root")),F()}},[[46,1,2]]]);
//# sourceMappingURL=main.fe227328.chunk.js.map